{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","inciarApp","mostrarServicios","mostrarSeccion","cambiarSeccion","paginaSiguiente","paginaAnterior","botonesPaginador","mostrarResumen","nombreCita","fechaCita","desabilitaFechaAnterior","horaCita","async","resultado","fetch","db","json","serviciosContenedor","document","querySelector","forEach","servicio","id","precio","nombreServicio","createElement","textContent","classList","add","precioServicio","servicioDiv","dataset","idServicio","onclick","seleccionarServicio","appendChild","error","console","log","resumenDiv","firstChild","removeChild","Object","values","includes","noServicio","headingCita","innerHTML","serviciosCita","headingServicios","cantidad","contenedorServicio","textoServicio","totalServicio","split","parseInt","trim","cantidadPagar","addEventListener","inputFecha","fechaAhora","Date","fechaDesabilitar","getFullYear","getMonth","getDate","min","remove","seccionAnterior","tabAnterior","querySelectorAll","enlace","e","preventDefault","target","paso","elemento","tagName","parentElement","contains","eliminarServicio","servicioObj","firstElementChild","nextElementSibling","agregarServicio","nombreTexto","value","length","mostrarAlerta","alerta","fechaInput","dia","getUTCDay","inputHora","mensaje","tipo","alertaPrevia","setTimeout","filter"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina = 1;\r\nconst cita = {\r\n    nombre: \"\",\r\n    fecha: \"\",\r\n    hora: \"\",\r\n    servicios:[]\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function(){\r\n    inciarApp();\r\n\r\n    \r\n});\r\n\r\n\r\nfunction inciarApp(){\r\n    mostrarServicios();\r\n    //Resalta el DIV actual segun el tab presionado\r\n    mostrarSeccion();\r\n    //Oculta o muestra una sección segun el tab preisonado\r\n    cambiarSeccion();\r\n\r\n    //Paginacion\r\n    paginaSiguiente();\r\n\r\n    paginaAnterior();\r\n\r\n    //Comprueba la pagina actual para ocultar o mostrar la paginacion\r\n    botonesPaginador();\r\n\r\n    //Muestra el resumen de la cita o mnsj de error si no completa\r\n    mostrarResumen();\r\n\r\n    //Almacena el nombre de la cita en el objeto\r\n    nombreCita();\r\n\r\n    //Validar Fecha\r\n    fechaCita();\r\n\r\n    //Deshabilita dias pasados\r\n    desabilitaFechaAnterior();\r\n\r\n    //Almacena la hora de la cita en el objeto\r\n    horaCita();\r\n}\r\n\r\n//UI\r\nasync function mostrarServicios(){\r\n    try{\r\n        const resultado = await fetch(\"./servicios.json\");\r\n        const db = await resultado.json();\r\n        const { servicios } = db;\r\n        const serviciosContenedor = document.querySelector(\"#servicios\");\r\n\r\n        //Generar HTML\r\n        servicios.forEach(servicio => {\r\n            const { id, nombre, precio } = servicio;\r\n\r\n            const nombreServicio = document.createElement(\"p\");\r\n            nombreServicio.textContent = nombre;\r\n            nombreServicio.classList.add(\"nombre-servicio\");\r\n\r\n            const precioServicio = document.createElement(\"p\");\r\n            precioServicio.textContent = `$${precio}`;\r\n            precioServicio.classList.add(\"precio-servicio\");\r\n\r\n            const servicioDiv = document.createElement(\"div\");\r\n            servicioDiv.classList.add(\"servicio\");\r\n            servicioDiv.dataset.idServicio = id;\r\n\r\n            //Seleccionar un servicio\r\n            servicioDiv.onclick = seleccionarServicio;\r\n\r\n\r\n            servicioDiv.appendChild(nombreServicio);\r\n            servicioDiv.appendChild(precioServicio);\r\n            serviciosContenedor.appendChild(servicioDiv);\r\n        });\r\n\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\nfunction mostrarResumen(){\r\n    // Destructuring\r\n    const {nombre, fecha, hora, servicios} = cita;\r\n\r\n    const resumenDiv = document.querySelector(\".contenido-resumen\");\r\n\r\n    //Limpia el HTML Previo\r\n    while(resumenDiv.firstChild){\r\n        resumenDiv.removeChild(resumenDiv.firstChild);\r\n    }\r\n    // Vaidación de objeto\r\n    if(Object.values(cita).includes(\"\")){\r\n        const noServicio = document.createElement(\"p\");\r\n        noServicio.textContent = \"Faltan datos de cita por llenar\";\r\n        noServicio.classList.add(\"invalidar-cita\");\r\n        //Agregar a resumen div\r\n        resumenDiv.appendChild(noServicio);\r\n    }else{\r\n        const headingCita = document.createElement(\"H3\");\r\n        headingCita.textContent = \"Resumen de cita\";\r\n\r\n        const nombreCita = document.createElement(\"p\");\r\n        nombreCita.innerHTML = `<span>Nombre: </span> ${nombre}`;\r\n\r\n        const fechaCita = document.createElement(\"p\");\r\n        fechaCita.innerHTML = `<span>Fecha: </span> ${fecha}`;\r\n\r\n        const horaCita = document.createElement(\"p\");\r\n        horaCita.innerHTML = `<span>Hora: </span> ${hora}`;\r\n\r\n        const serviciosCita = document.createElement(\"div\");\r\n        serviciosCita.classList.add(\"resumen-servicios\");\r\n\r\n        const headingServicios = document.createElement(\"H3\");\r\n        headingServicios.textContent = \"Resumen de servicios\";\r\n\r\n        serviciosCita.appendChild(headingServicios);\r\n        let cantidad     = 0;\r\n        //Iterar sobre el arreglo de servicios\r\n        servicios.forEach((servicio)=>{\r\n            const {nombre, precio} = servicio;\r\n            const contenedorServicio = document.createElement(\"div\");\r\n            contenedorServicio.classList.add(\"contenedor-servicio\");\r\n\r\n            const textoServicio = document.createElement(\"p\");\r\n            textoServicio.textContent = nombre;\r\n\r\n            const precioServicio = document.createElement(\"p\");\r\n            precioServicio.textContent = precio;\r\n            precioServicio.classList.add(\"precio\");\r\n\r\n            const totalServicio = precio.split(\"$\");\r\n\r\n            cantidad += parseInt(totalServicio[1].trim());\r\n\r\n            contenedorServicio.appendChild(textoServicio);\r\n            contenedorServicio.appendChild(precioServicio);\r\n            serviciosCita.appendChild(contenedorServicio);\r\n        })\r\n\r\n        console.log(cantidad);\r\n\r\n        resumenDiv.appendChild(headingCita);\r\n        resumenDiv.appendChild(nombreCita);\r\n        resumenDiv.appendChild(fechaCita);\r\n        resumenDiv.appendChild(horaCita);\r\n\r\n        resumenDiv.appendChild(serviciosCita);\r\n\r\n        const cantidadPagar = document.createElement(\"p\");\r\n        cantidadPagar.classList.add(\"total\");\r\n        cantidadPagar.innerHTML = `<span>Total a pagar: $</span>${cantidad}`;\r\n\r\n        resumenDiv.appendChild(cantidadPagar);\r\n    }\r\n\r\n\r\n}\r\n\r\nfunction paginaSiguiente(){\r\n    paginaSiguiente = document.querySelector(\"#siguiente\");\r\n    paginaSiguiente.addEventListener(\"click\", ()=>{\r\n        pagina ++;\r\n        botonesPaginador();\r\n    })\r\n}\r\n\r\nfunction paginaAnterior(){\r\n    paginaAnterior = document.querySelector(\"#anterior\");\r\n    paginaAnterior.addEventListener(\"click\", ()=>{\r\n        pagina --;\r\n        botonesPaginador();\r\n    })\r\n}\r\n\r\nfunction desabilitaFechaAnterior(){\r\n    const inputFecha = document.querySelector(\"#fecha\");\r\n    const fechaAhora = new Date();\r\n    const year = fechaAhora.getFullYear();\r\n    const mes = (fechaAhora.getMonth() < 10) ? (\"0\" + (fechaAhora.getMonth() + 1)) : (fechaAhora.getMonth() + 1);  \r\n    const dia = (fechaAhora.getDate() < 10) ? (\"0\" + (fechaAhora.getDate() + 1)) : (fechaAhora.getDate() + 1);\r\n\r\n    const fechaDesabilitar = `${year}-${mes}-${dia}`;\r\n    inputFecha.min = fechaDesabilitar;\r\n}\r\n\r\n\r\nfunction botonesPaginador(){\r\n    paginaSiguiente = document.querySelector(\"#siguiente\");\r\n    paginaAnterior = document.querySelector(\"#anterior\");\r\n\r\n    if(pagina === 1){\r\n        paginaAnterior.classList.add(\"ocultar\");\r\n    }else if(pagina === 3){\r\n        paginaSiguiente.classList.add(\"ocultar\");\r\n        paginaAnterior.classList.remove(\"ocultar\");\r\n        mostrarResumen();\r\n    }else{\r\n        paginaSiguiente.classList.remove(\"ocultar\");\r\n        paginaAnterior.classList.remove(\"ocultar\");\r\n\r\n    }\r\n\r\n    mostrarSeccion();\r\n    \r\n}\r\n\r\nfunction mostrarSeccion(){\r\n    const seccionAnterior = document.querySelector(\".mostrar-seccion\");\r\n\r\n    if(seccionAnterior){\r\n        //eliminar seccion anterior\r\n        seccionAnterior.classList.remove(\"mostrar-seccion\");\r\n    }\r\n\r\n    const seccionActual = document.querySelector(`#paso-${pagina}`);\r\n    seccionActual.classList.add(\"mostrar-seccion\");\r\n    \r\n    //Eliminar clase actual en tab anterior\r\n    const tabAnterior =document.querySelector(\".tabs .actual\");\r\n    if (tabAnterior){\r\n        tabAnterior.classList.remove(\"actual\");\r\n    }    \r\n    //Resalta el tab actual\r\n    const tab = document.querySelector(`[data-paso=\"${pagina}\"]`);\r\n    tab.classList.add(\"actual\");\r\n}\r\n\r\nfunction cambiarSeccion(){\r\n    const enlaces = document.querySelectorAll(\".tabs button\");\r\n    enlaces.forEach(enlace=>{\r\n        enlace.addEventListener(\"click\", e =>{\r\n            e.preventDefault();\r\n            pagina = parseInt(e.target.dataset.paso);\r\n  \r\n            mostrarSeccion();\r\n            botonesPaginador();\r\n        });\r\n    });\r\n\r\n}\r\n\r\nfunction seleccionarServicio(e){\r\n    let elemento;\r\n    if(e.target.tagName === \"P\"){\r\n        elemento = e.target.parentElement;\r\n    }else{\r\n        elemento = e.target;\r\n    }\r\n\r\n    if(elemento.classList.contains(\"seleccionado\")){\r\n        elemento.classList.remove(\"seleccionado\");\r\n        const id = parseInt(elemento.dataset.idServicio);\r\n        eliminarServicio(id);\r\n    }else{\r\n        elemento.classList.add(\"seleccionado\");\r\n        servicioObj ={\r\n            id: parseInt(elemento.dataset.idServicio),\r\n            nombre: elemento.firstElementChild.textContent,\r\n            precio: elemento.firstElementChild.nextElementSibling.textContent\r\n\r\n        }\r\n        agregarServicio(servicioObj);\r\n    }\r\n}\r\n//Extraer datos\r\nfunction nombreCita(){\r\n    const nombreInput = document.querySelector(\"#nombre\");\r\n    nombreInput.addEventListener(\"input\", (e)=>{\r\n        const nombreTexto = e.target.value.trim();\r\n        if(nombreTexto === \"\" || nombreTexto.length <3){\r\n           mostrarAlerta(\"Mensaje no valido\", \"error\")\r\n        }else{\r\n            alerta = document.querySelector(\".alerta\");\r\n            if(alerta){\r\n                alerta.remove();\r\n            }\r\n            cita.nombre = nombreTexto;\r\n        }\r\n    });\r\n}\r\n\r\nfunction fechaCita(){\r\n    const fechaInput = document.querySelector(\"#fecha\");\r\n    fechaInput.addEventListener(\"input\", e =>{\r\n        const dia = new Date(e.target.value).getUTCDay();\r\n\r\n        if([0].includes(dia)){\r\n            e.preventDefault();\r\n            fechaInput.value = \"\";\r\n            mostrarAlerta(\"No hay citas en Domingo\", \"error\");\r\n        }else{\r\n            cita.fecha = fechaInput.value;\r\n        }\r\n    })\r\n}\r\n\r\nfunction horaCita(){\r\n    const inputHora = document.querySelector(\"#hora\");\r\n    inputHora.addEventListener(\"input\", e=>{\r\n        const horaCita = e.target.value;\r\n        const hora = horaCita.split(\":\");\r\n        if(hora[0] < 8 || hora[0] > 22){\r\n           mostrarAlerta(\"Hora no valida\", \"error\");\r\n               inputHora.value = \"\";\r\n        }else{\r\n            cita.hora = horaCita;\r\n        }\r\n    })\r\n}\r\n\r\n//Utilidades\r\nfunction mostrarAlerta(mensaje, tipo){\r\n    //Si hay una alerta previa no crear otra\r\n    alertaPrevia = document.querySelector(\".alerta\");\r\n    if(!alertaPrevia){\r\n\r\n        const alerta = document.createElement(\"div\");\r\n        alerta.textContent = mensaje;\r\n        alerta.classList.add(\"alerta\");\r\n    \r\n        if(tipo === \"error\"){\r\n            alerta.classList.add(\"error\");\r\n        }\r\n    \r\n        // Insertar en el html\r\n        const formulario = document.querySelector(\".formulario\");\r\n        formulario.appendChild(alerta);\r\n\r\n        setTimeout(()=>{\r\n            alerta.remove();\r\n        },3000)\r\n    }\r\n\r\n}\r\n\r\nfunction eliminarServicio(id){\r\n    const {servicios} = cita;\r\n    cita.servicios = servicios.filter(servicio => servicio.id !== id);\r\n}\r\n\r\nfunction agregarServicio(servicioObj){\r\n    const {servicios} = cita;\r\n   cita.servicios = [...servicios, servicioObj];\r\n}"]}